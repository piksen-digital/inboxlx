<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>InboxLX – Domain & Copy Compliance for Cold Email</title>
    <meta name="description" content="Check domain technical readiness AND email copy compliance for cold email campaigns. Avoid spam filters and legal issues.">
    <meta name="keywords" content="cold email, domain check, email deliverability, SPF, DKIM, DMARC, email copy compliance, spam triggers, unsubscribe compliance">
    <meta name="robots" content="index, follow">
    <link rel="canonical" href="https://inboxlx.vercel.app">
    <meta property="og:title" content="InboxLX – Two Critical Checks Before You Send">
    <meta property="og:description" content="Domain readiness + email copy compliance for cold emailers.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://inboxlx.vercel.app">
    <meta property="og:image" content="https://inboxlx.vercel.app/og-image.png">
    
    <!-- Favicon – SVG + PNG fallback -->
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%233B82F6'%3E%3Cpath d='M20 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z'/%3E%3C/svg%3E">
    <link rel="icon" type="image/png" href="https://inboxlx.vercel.app/favicon.png">
    
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'primary': '#3B82F6',
                        'secondary': '#10B981',
                        'accent': '#8B5CF6',
                        'warning': '#F59E0B',
                        'dark': '#111827',
                        'light': '#F9FAFB'
                    },
                    fontFamily: {
                        'sans': ['Inter', 'system-ui', 'sans-serif']
                    },
                    animation: {
                        'pulse-slow': 'pulse 3s infinite',
                        'fade-in': 'fadeIn 0.5s ease-in-out',
                        'slide-up': 'slideUp 0.3s ease-out'
                    },
                    keyframes: {
                        fadeIn: {
                            '0%': { opacity: '0' },
                            '100%': { opacity: '1' }
                        },
                        slideUp: {
                            '0%': { transform: 'translateY(10px)', opacity: '0' },
                            '100%': { transform: 'translateY(0)', opacity: '1' }
                        }
                    }
                }
            }
        }
    </script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        .gradient-bg {
            background: linear-gradient(rgba(0, 0, 0, 0.85), rgba(0, 0, 0, 0.9)), url('https://images.unsplash.com/photo-1552664730-d307ca884978?ixlib=rb-4.0.3&auto=format&fit=crop&w=2070&q=80');
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
        }
        .header-blur {
            backdrop-filter: blur(4px);
            background-color: rgba(0, 0, 0, 0.7);
        }
        .card-hover {
            transition: all 0.3s ease;
        }
        .card-hover:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
        }
        .status-ready { background: linear-gradient(135deg, #10B981 0%, #059669 100%); }
        .status-risky { background: linear-gradient(135deg, #F59E0B 0%, #D97706 100%); }
        .status-not-ready { background: linear-gradient(135deg, #EF4444 0%, #DC2626 100%); }
        .status-compliant { background: linear-gradient(135deg, #10B981 0%, #059669 100%); }
        .status-needs-review { background: linear-gradient(135deg, #F59E0B 0%, #D97706 100%); }
        .status-non-compliant { background: linear-gradient(135deg, #EF4444 0%, #DC2626 100%); }
        .check-pass { color: #10B981; }
        .check-warning { color: #F59E0B; }
        .check-fail { color: #EF4444; }
        .mobile-menu { transition: all 0.3s ease; }
        .glass-card {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        .highlight-spam {
            background-color: rgba(239, 68, 68, 0.2);
            border-left: 3px solid #EF4444;
            padding-left: 8px;
        }
        .highlight-warning {
            background-color: rgba(245, 158, 11, 0.2);
            border-left: 3px solid #F59E0B;
            padding-left: 8px;
        }
        .highlight-good {
            background-color: rgba(16, 185, 129, 0.2);
            border-left: 3px solid #10B981;
            padding-left: 8px;
        }
        .email-preview {
            font-family: 'Georgia', serif;
            line-height: 1.6;
            white-space: pre-wrap;
        }
        .user-menu-dropdown {
            position: absolute;
            top: 100%;
            right: 0;
            min-width: 200px;
            background: #1F2937;
            border: 1px solid #374151;
            border-radius: 0.5rem;
            padding: 0.5rem 0;
            box-shadow: 0 10px 15px -3px rgba(0,0,0,0.3);
            z-index: 100;
        }
        .user-menu-dropdown a, .user-menu-dropdown button {
            display: block;
            width: 100%;
            text-align: left;
            padding: 0.5rem 1rem;
            color: #D1D5DB;
            transition: background 0.2s;
        }
        .user-menu-dropdown a:hover, .user-menu-dropdown button:hover {
            background: #374151;
            color: white;
        }
    </style>
</head>
<body class="bg-dark text-white font-sans">

    <!-- Fixed Header -->
    <header class="fixed top-0 left-0 right-0 z-50 header-blur shadow-lg">
        <div class="container mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <!-- Logo -->
                <div class="flex items-center">
                    <a href="#" class="flex items-center space-x-2">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="w-8 h-8 text-primary">
                            <path fill="currentColor" d="M20 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z"/>
                            <path fill="currentColor" d="M14 16H4v-4h10v4zm4-4h-2v2h2v-2z" opacity="0.7"/>
                        </svg>
                        <div>
                            <span class="font-bold text-xl text-white">InboxLX</span>
                            <span class="font-medium text-sm text-primary">Pro</span>
                        </div>
                    </a>
                </div>
                
                <!-- Desktop Navigation + User Info -->
                <nav class="hidden md:flex items-center space-x-8">
                    <a href="#features" class="text-gray-300 hover:text-white transition-colors">Features</a>
                    <a href="#how-it-works" class="text-gray-300 hover:text-white transition-colors">How It Works</a>
                    <a href="#tools" class="text-gray-300 hover:text-white transition-colors">Tools</a>
                    <a href="#pricing" class="text-gray-300 hover:text-white transition-colors">Pricing</a>
                    <a href="#faq" class="text-gray-300 hover:text-white transition-colors">FAQ</a>
                    
                    <!-- User area -->
                    <div class="flex items-center space-x-4" id="user-info">
                        <span id="user-email" class="text-sm text-gray-300 hidden"></span>
                        <span id="usage-badge" class="bg-blue-900/50 text-blue-300 px-3 py-1 rounded-full text-sm hidden">1/1 checks</span>
                        <div class="relative">
                            <button id="user-menu-btn" class="w-8 h-8 rounded-full bg-primary flex items-center justify-center hidden">
                                <i class="fas fa-user text-white text-sm"></i>
                            </button>
                            <div id="user-dropdown" class="user-menu-dropdown hidden">
                                <div class="px-4 py-2 text-xs text-gray-400 border-b border-gray-700" id="dropdown-tier">Free</div>
                                <a href="#" id="dropdown-dashboard">Dashboard</a>
                                <button id="dropdown-logout">Logout</button>
                            </div>
                        </div>
                        <button id="login-header-btn" class="bg-primary text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors">
                            Sign In
                        </button>
                    </div>
                </nav>
                
                <!-- Mobile Menu Button (hamburger) -->
                <button id="mobile-menu-button" class="md:hidden text-gray-300 hover:text-white focus:outline-none">
                    <i class="fas fa-bars text-2xl"></i>
                </button>
            </div>
        </div>
        
        <!-- Mobile Menu -->
        <div id="mobile-menu" class="mobile-menu md:hidden fixed inset-0 bg-black bg-opacity-90 z-40 opacity-0 pointer-events-none">
            <div class="absolute right-0 top-0 h-full w-64 bg-gray-900 shadow-lg transform translate-x-full transition-transform duration-300">
                <div class="flex flex-col p-6 space-y-6">
                    <div class="flex justify-between items-center">
                        <span class="font-bold text-xl text-white">Menu</span>
                        <button id="close-mobile-menu" class="text-gray-400 hover:text-white">
                            <i class="fas fa-times text-xl"></i>
                        </button>
                    </div>
                    <a href="#features" class="text-gray-300 hover:text-white text-lg py-2">Features</a>
                    <a href="#how-it-works" class="text-gray-300 hover:text-white text-lg py-2">How It Works</a>
                    <a href="#tools" class="text-gray-300 hover:text-white text-lg py-2">Tools</a>
                    <a href="#pricing" class="text-gray-300 hover:text-white text-lg py-2">Pricing</a>
                    <a href="#faq" class="text-gray-300 hover:text-white text-lg py-2">FAQ</a>
                    <button id="mobile-login-btn" class="bg-primary text-white px-4 py-3 rounded-lg text-center hover:bg-blue-700">Sign In</button>
                </div>
            </div>
        </div>
    </header>

    <!-- Hero Section -->
    <section class="gradient-bg pt-24 pb-16 md:pt-32 md:pb-24">
        <div class="container mx-auto px-4 sm:px-6 lg:px-8">
            <div class="max-w-4xl mx-auto text-center">
                <h1 class="text-4xl md:text-5xl font-bold mb-6 text-white">
                    Don't burn your domain OR get flagged for spam
                </h1>
                <p class="text-xl text-gray-300 mb-10 max-w-3xl mx-auto">
                    <span class="font-semibold text-primary">InboxLX</span> checks both domain technical readiness AND email copy compliance before you press Send.
                </p>
                
                <!-- Subscription Modal -->
                <div id="subscription-modal" class="fixed inset-0 bg-black bg-opacity-80 z-50 hidden items-center justify-center p-4">
                    <div class="glass-card rounded-2xl p-6 md:p-8 max-w-md w-full animate-fade-in">
                        <div class="flex justify-between items-center mb-6">
                            <h3 class="text-xl font-bold text-white">Subscription Required</h3>
                            <button id="close-modal" class="text-gray-400 hover:text-white">
                                <i class="fas fa-times text-xl"></i>
                            </button>
                        </div>
                        <div class="mb-6">
                            <div class="bg-blue-900/30 border border-blue-700 rounded-xl p-4 mb-4">
                                <div class="flex items-center justify-between mb-2">
                                    <span class="font-semibold">Free Tier</span>
                                    <span class="text-green-400 font-bold">$0</span>
                                </div>
                                <p class="text-sm text-gray-300">1 domain check per month • Basic checks only • No copy compliance</p>
                            </div>
                            <div class="bg-purple-900/30 border border-purple-700 rounded-xl p-4">
                                <div class="flex items-center justify-between mb-2">
                                    <span class="font-semibold">Pro Tier</span>
                                    <span class="text-yellow-400 font-bold">$14.99/month</span>
                                </div>
                                <p class="text-sm text-gray-300">Unlimited domain & copy checks • All features • Priority support</p>
                            </div>
                        </div>
                        <div class="space-y-4">
                            <a href="https://whop.com/inboxlx" target="_blank" 
                               class="block w-full bg-gradient-to-r from-purple-600 to-blue-600 text-white text-center py-3 rounded-lg hover:opacity-90 transition-opacity font-semibold">
                                Subscribe on Whop
                            </a>
                            <div class="text-center">
                                <p class="text-sm text-gray-400 mb-2">Already have a subscription?</p>
                                <button id="enter-license-btn" class="text-primary hover:text-blue-400 text-sm">
                                    Enter License Key
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- License Key Modal -->
                <div id="license-modal" class="fixed inset-0 bg-black bg-opacity-80 z-50 hidden items-center justify-center p-4">
                    <div class="glass-card rounded-2xl p-6 md:p-8 max-w-md w-full animate-fade-in">
                        <div class="flex justify-between items-center mb-6">
                            <h3 class="text-xl font-bold text-white">Enter License Key</h3>
                            <button id="close-license-modal" class="text-gray-400 hover:text-white">
                                <i class="fas fa-times text-xl"></i>
                            </button>
                        </div>
                        <div class="mb-6">
                            <input type="text" id="license-key-input" placeholder="XXXX-XXXX-XXXX-XXXX" 
                                   class="w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-lg text-white focus:ring-2 focus:ring-primary focus:border-transparent">
                            <p class="text-sm text-gray-400 mt-2">Find your license key in your Whop dashboard</p>
                        </div>
                        <div class="space-y-3">
                            <button id="verify-license-btn" class="w-full bg-primary text-white py-3 rounded-lg hover:bg-blue-700 font-semibold">
                                Verify License
                            </button>
                            <button id="back-to-subscription" class="w-full text-gray-400 hover:text-white text-sm">
                                ← Back to subscription options
                            </button>
                        </div>
                    </div>
                </div>
                
                <!-- Login Modal -->
                <div id="login-modal" class="fixed inset-0 bg-black bg-opacity-80 z-50 hidden items-center justify-center p-4">
                    <div class="glass-card rounded-2xl p-6 md:p-8 max-w-md w-full animate-fade-in">
                        <div class="flex justify-between items-center mb-6">
                            <h3 class="text-xl font-bold text-white">Sign In / Sign Up</h3>
                            <button id="close-login-modal" class="text-gray-400 hover:text-white">
                                <i class="fas fa-times text-xl"></i>
                            </button>
                        </div>
                        <div class="mb-4">
                            <input type="email" id="login-email" placeholder="Email" 
                                   class="w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-lg text-white mb-3">
                            <input type="password" id="login-password" placeholder="Password" 
                                   class="w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-lg text-white mb-3">
                            <p id="login-error" class="text-red-400 text-sm hidden"></p>
                        </div>
                        <div class="space-y-3">
                            <button id="login-submit" class="w-full bg-primary text-white py-3 rounded-lg hover:bg-blue-700">
                                Continue
                            </button>
                            <p class="text-center text-gray-400 text-sm">No account? We'll create one automatically.</p>
                        </div>
                    </div>
                </div>
                
                <!-- AI Rewrite Modal -->
                <div id="ai-rewrite-modal" class="fixed inset-0 bg-black bg-opacity-80 z-50 hidden items-center justify-center p-4">
                    <div class="glass-card rounded-2xl p-6 md:p-8 max-w-2xl w-full animate-fade-in">
                        <div class="flex justify-between items-center mb-4">
                            <h3 class="text-xl font-bold text-white">✨ AI Rewrite</h3>
                            <button id="close-ai-modal" class="text-gray-400 hover:text-white">
                                <i class="fas fa-times text-xl"></i>
                            </button>
                        </div>
                        <div class="mb-4">
                            <label class="block text-gray-300 mb-2">Tone</label>
                            <select id="ai-tone" class="w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-lg text-white">
                                <option value="professional">Professional</option>
                                <option value="friendly">Friendly</option>
                                <option value="persuasive">Persuasive</option>
                                <option value="concise">Concise</option>
                            </select>
                        </div>
                        <div class="mb-4">
                            <label class="block text-gray-300 mb-2">Rewritten Copy (editable)</label>
                            <textarea id="ai-rewritten-text" rows="8" class="w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-lg text-white font-mono"></textarea>
                        </div>
                        <div class="flex gap-3">
                            <button id="apply-rewrite-btn" class="bg-green-600 text-white px-6 py-3 rounded-lg hover:bg-green-700">Apply to Editor</button>
                            <button id="regenerate-rewrite-btn" class="bg-gray-700 text-white px-6 py-3 rounded-lg hover:bg-gray-600">Regenerate</button>
                            <button id="cancel-rewrite-btn" class="bg-gray-800 text-gray-400 px-6 py-3 rounded-lg hover:bg-gray-700">Cancel</button>
                        </div>
                    </div>
                </div>
                
                <!-- Tool Navigation -->
                <div class="flex justify-center mb-8">
                    <div class="bg-gray-800/50 rounded-lg p-1 inline-flex">
                        <button id="tab-domain" class="px-4 py-2 rounded-md bg-primary text-white font-medium">Domain Check</button>
                        <button id="tab-copy" class="px-4 py-2 rounded-md text-gray-300 hover:text-white font-medium">Copy Compliance</button>
                    </div>
                </div>
                
                <!-- Domain Check Tool Card -->
                <div id="domain-tool" class="tool-section glass-card rounded-2xl p-6 md:p-8 max-w-4xl mx-auto card-hover">
                    <div class="flex items-center justify-between mb-4">
                        <h2 class="text-2xl font-semibold text-white">
                            <i class="fas fa-server mr-2 text-primary"></i>Domain Readiness Check
                        </h2>
                        <div id="domain-usage-badge" class="hidden text-sm bg-blue-900/50 text-blue-300 px-3 py-1 rounded-full">
                            0/1 domain checks this month
                        </div>
                    </div>
                    
                    <p class="text-gray-300 mb-6">Enter your domain name to see if it's technically safe to send cold email</p>
                    
                    <div class="flex flex-col md:flex-row gap-4 mb-8">
                        <div class="flex-grow">
                            <input type="text" id="domain-input" placeholder="example.com" 
                                   class="w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-lg text-white focus:ring-2 focus:ring-primary focus:border-transparent">
                            <p class="text-sm text-gray-400 mt-2">Don't include "http://" or "www"</p>
                        </div>
                        <button id="check-domain-button" class="bg-primary text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors font-semibold whitespace-nowrap">
                            Check Domain
                        </button>
                    </div>
                    
                    <!-- Domain Results Section -->
                    <div id="domain-results-section" class="hidden animate-fade-in">
                        <div class="border-t border-gray-700 pt-8">
                            <div id="domain-verdict-header" class="flex items-center justify-between mb-8">
                                <div>
                                    <h3 class="text-xl font-semibold text-white">Domain: <span id="domain-display" class="text-primary">example.com</span></h3>
                                    <p id="domain-last-updated" class="text-gray-400 text-sm">Last checked: Just now</p>
                                </div>
                                <div id="domain-verdict-badge" class="px-4 py-2 rounded-full text-white font-semibold"></div>
                            </div>
                            
                            <!-- Domain Checks Grid -->
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8">
                                <div id="mx-check" class="bg-gray-800/50 border border-gray-700 rounded-xl p-5">
                                    <div class="flex items-center justify-between mb-3">
                                        <h4 class="font-semibold text-white">MX Records</h4>
                                        <div class="check-icon"></div>
                                    </div>
                                    <p class="text-gray-400 text-sm mb-3">Confirms your domain can receive email</p>
                                    <div class="check-details text-sm"></div>
                                </div>
                                <div id="spf-check" class="bg-gray-800/50 border border-gray-700 rounded-xl p-5">
                                    <div class="flex items-center justify-between mb-3">
                                        <h4 class="font-semibold text-white">SPF Record</h4>
                                        <div class="check-icon"></div>
                                    </div>
                                    <p class="text-gray-400 text-sm mb-3">Prevents spoofing, required for deliverability</p>
                                    <div class="check-details text-sm"></div>
                                </div>
                                <div id="dkim-check" class="bg-gray-800/50 border border-gray-700 rounded-xl p-5">
                                    <div class="flex items-center justify-between mb-3">
                                        <h4 class="font-semibold text-white">DKIM Record</h4>
                                        <div class="check-icon"></div>
                                    </div>
                                    <p class="text-gray-400 text-sm mb-3">Proves emails aren't altered in transit</p>
                                    <div class="check-details text-sm"></div>
                                </div>
                                <div id="dmarc-check" class="bg-gray-800/50 border border-gray-700 rounded-xl p-5">
                                    <div class="flex items-center justify-between mb-3">
                                        <h4 class="font-semibold text-white">DMARC Record</h4>
                                        <div class="check-icon"></div>
                                    </div>
                                    <p class="text-gray-400 text-sm mb-3">Tells receivers how to handle failing emails</p>
                                    <div class="check-details text-sm"></div>
                                </div>
                                <div id="age-check" class="bg-gray-800/50 border border-gray-700 rounded-xl p-5 md:col-span-2">
                                    <div class="flex items-center justify-between mb-3">
                                        <h4 class="font-semibold text-white">Domain Age</h4>
                                        <div class="check-icon"></div>
                                    </div>
                                    <p class="text-gray-400 text-sm mb-3">Young domains get watched closely by providers</p>
                                    <div class="check-details text-sm"></div>
                                </div>
                            </div>
                            
                            <div id="domain-recommendations" class="bg-blue-900/30 border border-blue-700 rounded-xl p-6">
                                <h4 class="font-semibold text-blue-300 mb-3">Recommendations & Next Steps</h4>
                                <div class="domain-recommendations-list text-blue-200"></div>
                            </div>
                        </div>
                    </div>
                    
                    <div id="domain-loading-state" class="hidden text-center py-12">
                        <div class="inline-block animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary mb-4"></div>
                        <p class="text-gray-300">Checking domain records...</p>
                    </div>
                </div>
                
                <!-- Copy Compliance Tool Card -->
                <div id="copy-tool" class="tool-section hidden glass-card rounded-2xl p-6 md:p-8 max-w-4xl mx-auto card-hover">
                    <div class="flex items-center justify-between mb-4">
                        <h2 class="text-2xl font-semibold text-white">
                            <i class="fas fa-file-alt mr-2 text-warning"></i>Cold Email Copy Compliance
                        </h2>
                        <div class="flex items-center space-x-2">
                            <span class="text-sm bg-purple-900/50 text-purple-300 px-3 py-1 rounded-full">Pro Feature</span>
                            <button id="copy-upgrade-btn" class="text-sm text-yellow-400 hover:text-yellow-300">Upgrade</button>
                        </div>
                    </div>
                    
                    <p class="text-gray-300 mb-6">Check your email copy for spam triggers, overclaim language, deceptive patterns, and compliance issues</p>
                    
                    <div class="mb-8">
                        <div class="mb-4">
                            <label class="block text-gray-300 mb-2">Email Subject:</label>
                            <input type="text" id="email-subject" placeholder="Quick question about your business..." 
                                   class="w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-lg text-white focus:ring-2 focus:ring-primary focus:border-transparent mb-4">
                        </div>
                        <div class="mb-4">
                            <label class="block text-gray-300 mb-2">Email Body:</label>
                            <textarea id="email-body" rows="10" placeholder="Hi {First Name}, ..." 
                                      class="w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-lg text-white focus:ring-2 focus:ring-primary focus:border-transparent"></textarea>
                        </div>
                        <div class="flex flex-col md:flex-row gap-4">
                            <div class="flex-grow">
                                <label class="block text-gray-300 mb-2">From Name (Optional):</label>
                                <input type="text" id="from-name" placeholder="John Smith" 
                                       class="w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-lg text-white">
                            </div>
                            <div class="flex-grow">
                                <label class="block text-gray-300 mb-2">Industry (Optional):</label>
                                <select id="email-industry" class="w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-lg text-white">
                                    <option value="general">General</option>
                                    <option value="saas">SaaS</option>
                                    <option value="ecommerce">E-commerce</option>
                                    <option value="finance">Finance</option>
                                    <option value="healthcare">Healthcare</option>
                                    <option value="realestate">Real Estate</option>
                                    <option value="marketing">Marketing</option>
                                    <option value="consulting">Consulting</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    
                    <div class="flex flex-col md:flex-row gap-4">
                        <button id="check-copy-button" class="bg-warning text-gray-900 px-6 py-3 rounded-lg hover:bg-yellow-600 transition-colors font-semibold whitespace-nowrap">
                            <i class="fas fa-search mr-2"></i>Analyze Copy
                        </button>
                        <button id="load-example-button" class="bg-gray-700 text-gray-300 px-6 py-3 rounded-lg hover:bg-gray-600 font-semibold">
                            <i class="fas fa-eye mr-2"></i>Load Example
                        </button>
                        <button id="ai-rewrite-button" class="bg-purple-600 text-white px-6 py-3 rounded-lg hover:bg-purple-700 font-semibold">
                            <i class="fas fa-magic mr-2"></i>✨ Rewrite with AI
                        </button>
                        <button id="clear-copy-button" class="bg-gray-800 text-gray-400 px-6 py-3 rounded-lg hover:bg-gray-700 font-semibold">
                            <i class="fas fa-times mr-2"></i>Clear
                        </button>
                    </div>
                    
                    <!-- Copy Results Section -->
                    <div id="copy-results-section" class="hidden animate-fade-in mt-8">
                        <div class="border-t border-gray-700 pt-8">
                            <div id="copy-verdict-header" class="flex items-center justify-between mb-8">
                                <div>
                                    <h3 class="text-xl font-semibold text-white">Copy Compliance Analysis</h3>
                                    <p id="copy-last-updated" class="text-gray-400 text-sm">Last analyzed: Just now</p>
                                </div>
                                <div id="copy-verdict-badge" class="px-4 py-2 rounded-full text-white font-semibold"></div>
                            </div>
                            
                            <div class="mb-8">
                                <h4 class="font-semibold text-white mb-3">Email Preview with Highlights:</h4>
                                <div id="email-preview" class="email-preview bg-gray-900/50 border border-gray-700 rounded-xl p-6 text-gray-300"></div>
                                <div class="mt-3 text-sm text-gray-400 flex flex-wrap gap-3">
                                    <div class="flex items-center"><div class="w-3 h-3 bg-red-500 mr-2 rounded-sm"></div>High spam risk</div>
                                    <div class="flex items-center"><div class="w-3 h-3 bg-yellow-500 mr-2 rounded-sm"></div>Moderate risk</div>
                                    <div class="flex items-center"><div class="w-3 h-3 bg-green-500 mr-2 rounded-sm"></div>Good practice</div>
                                </div>
                            </div>
                            
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8">
                                <div id="spam-triggers-check" class="bg-gray-800/50 border border-gray-700 rounded-xl p-5">
                                    <div class="flex items-center justify-between mb-3">
                                        <h4 class="font-semibold text-white">Spam Trigger Words</h4>
                                        <div class="check-icon"></div>
                                    </div>
                                    <p class="text-gray-400 text-sm mb-3">Words that increase spam filter risk</p>
                                    <div class="check-details text-sm"></div>
                                    <div class="mt-2 text-xs text-gray-500" id="spam-specific"></div>
                                </div>
                                <div id="overclaim-check" class="bg-gray-800/50 border border-gray-700 rounded-xl p-5">
                                    <div class="flex items-center justify-between mb-3">
                                        <h4 class="font-semibold text-white">Overclaim Language</h4>
                                        <div class="check-icon"></div>
                                    </div>
                                    <p class="text-gray-400 text-sm mb-3">Exaggerated claims that hurt credibility</p>
                                    <div class="check-details text-sm"></div>
                                    <div class="mt-2 text-xs text-gray-500" id="overclaim-specific"></div>
                                </div>
                                <div id="personalization-check" class="bg-gray-800/50 border border-gray-700 rounded-xl p-5">
                                    <div class="flex items-center justify-between mb-3">
                                        <h4 class="font-semibold text-white">Personalization Patterns</h4>
                                        <div class="check-icon"></div>
                                    </div>
                                    <p class="text-gray-400 text-sm mb-3">Deceptive or fake personalization markers</p>
                                    <div class="check-details text-sm"></div>
                                    <div class="mt-2 text-xs text-gray-500" id="personalization-specific"></div>
                                </div>
                                <div id="unsubscribe-check" class="bg-gray-800/50 border border-gray-700 rounded-xl p-5">
                                    <div class="flex items-center justify-between mb-3">
                                        <h4 class="font-semibold text-white">Unsubscribe Compliance</h4>
                                        <div class="check-icon"></div>
                                    </div>
                                    <p class="text-gray-400 text-sm mb-3">Required by CAN-SPAM</p>
                                    <div class="check-details text-sm"></div>
                                    <div class="mt-2 text-xs text-gray-500" id="unsubscribe-specific"></div>
                                </div>
                                <div id="tone-check" class="bg-gray-800/50 border border-gray-700 rounded-xl p-5 md:col-span-2">
                                    <div class="flex items-center justify-between mb-3">
                                        <h4 class="font-semibold text-white">Tone & Readability</h4>
                                        <div class="check-icon"></div>
                                    </div>
                                    <p class="text-gray-400 text-sm mb-3">Overall email tone and readability score</p>
                                    <div class="check-details text-sm"></div>
                                    <div class="mt-2 text-xs text-gray-500" id="tone-specific"></div>
                                </div>
                            </div>
                            
                            <div id="copy-recommendations" class="bg-purple-900/30 border border-purple-700 rounded-xl p-6">
                                <h4 class="font-semibold text-purple-300 mb-3">Copy Improvement Recommendations</h4>
                                <div class="copy-recommendations-list text-purple-200"></div>
                            </div>
                        </div>
                    </div>
                    
                    <div id="copy-loading-state" class="hidden text-center py-12">
                        <div class="inline-block animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-warning mb-4"></div>
                        <p class="text-gray-300">Analyzing email copy...</p>
                    </div>
                </div>
                
                <p class="text-gray-400 text-sm mt-6 max-w-2xl mx-auto">
                    These tools check technical domain readiness AND email copy compliance. They do NOT guarantee inbox placement, send emails, warm domains, or bypass spam filters.
                </p>
            </div>
        </div>
    </section>

    <!-- Features, How It Works, Tools, Pricing, FAQ sections (unchanged, but keep for completeness) -->
    <section id="features" class="py-16 bg-gray-900">
        <div class="container mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center mb-12">
                <h2 class="text-3xl font-bold mb-4 text-white">Two Critical Checks Before You Send</h2>
                <p class="text-gray-400 max-w-2xl mx-auto">Most tools focus only on deliverability. We check both infrastructure AND message safety.</p>
            </div>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-8 max-w-6xl mx-auto">
                <div class="bg-gray-800 rounded-2xl p-6 card-hover">...</div>
                <div class="bg-gray-800 rounded-2xl p-6 card-hover">...</div>
            </div>
        </div>
    </section>
    <!-- ... other sections omitted for brevity but should be kept from original -->

    <!-- Footer -->
    <footer class="bg-black text-gray-400 py-12">
        <div class="container mx-auto px-4 sm:px-6 lg:px-8">
            <div class="grid grid-cols-1 md:grid-cols-4 gap-8 max-w-6xl mx-auto pb-8 border-b border-gray-800">
                <div>
                    <div class="flex items-center mb-4">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="w-8 h-8 text-primary mr-2">
                            <path fill="currentColor" d="M20 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z"/>
                            <path fill="currentColor" d="M14 16H4v-4h10v4zm4-4h-2v2h2v-2z" opacity="0.7"/>
                        </svg>
                        <div>
                            <span class="font-bold text-xl text-white">InboxLX</span>
                            <span class="font-medium text-sm text-primary">Pro</span>
                        </div>
                    </div>
                    <p class="text-sm">Know if your domain AND email copy are safe for cold email before you press Send.</p>
                </div>
                <div>
                    <h4 class="text-white font-semibold mb-4">Product</h4>
                    <ul class="space-y-2">
                        <li><a href="#features" class="hover:text-secondary">Features</a></li>
                        <li><a href="#tools" class="hover:text-secondary">Tools</a></li>
                        <li><a href="#how-it-works" class="hover:text-secondary">How It Works</a></li>
                        <li><a href="#pricing" class="hover:text-secondary">Pricing</a></li>
                        <li><a href="#faq" class="hover:text-secondary">FAQ</a></li>
                    </ul>
                </div>
                <div>
                    <h4 class="text-white font-semibold mb-4">Legal</h4>
                    <ul class="space-y-2">
                        <li><a href="#" class="hover:text-secondary">Privacy Policy</a></li>
                        <li><a href="#" class="hover:text-secondary">Terms of Service</a></li>
                        <li><a href="#" class="hover:text-secondary">Disclaimer</a></li>
                    </ul>
                </div>
                <div>
                    <h4 class="text-white font-semibold mb-4">Contact</h4>
                    <ul class="space-y-2">
                        <li><a href="mailto:one04digital@outlook.com" class="hover:text-secondary">one04digital@outlook.com</a></li>
                        <li><a href="mailto:one04digital@outlook.com" class="hover:text-secondary">Support</a></li>
                        <li><a href="https://whop.com/inboxlx" target="_blank" class="hover:text-secondary">Purchase on Whop</a></li>
                    </ul>
                </div>
            </div>
            <div class="pt-8 text-center">
                <p>&copy; <span id="current-year"></span> InboxLX. All rights reserved.</p>
                <p class="text-sm mt-2">InboxLX provides analytical guidance to support better email performance.</p>
            </div>
        </div>
    </footer>

    <!-- Scroll to top button -->
    <button id="scroll-to-top" class="fixed bottom-6 right-6 bg-primary text-white w-12 h-12 rounded-full shadow-lg hover:bg-blue-700 transition-colors duration-300 hidden">
        <i class="fas fa-arrow-up"></i>
    </button>

    <script>
        // --- Mobile Menu, Scroll-to-top, Year ---
        const mobileMenuButton = document.getElementById('mobile-menu-button');
        const closeMobileMenuButton = document.getElementById('close-mobile-menu');
        const mobileMenu = document.getElementById('mobile-menu');
        const mobileMenuPanel = mobileMenu.querySelector('div');
        
        mobileMenuButton.addEventListener('click', () => {
            mobileMenu.classList.remove('pointer-events-none');
            mobileMenu.classList.add('pointer-events-auto');
            mobileMenu.classList.remove('opacity-0');
            mobileMenu.classList.add('opacity-100');
            mobileMenuPanel.classList.remove('translate-x-full');
        });
        
        closeMobileMenuButton.addEventListener('click', () => {
            mobileMenu.classList.remove('pointer-events-auto');
            mobileMenu.classList.add('pointer-events-none');
            mobileMenu.classList.remove('opacity-100');
            mobileMenu.classList.add('opacity-0');
            mobileMenuPanel.classList.add('translate-x-full');
        });
        
        mobileMenu.querySelectorAll('a, button').forEach(el => {
            el.addEventListener('click', () => {
                mobileMenu.classList.remove('pointer-events-auto');
                mobileMenu.classList.add('pointer-events-none');
                mobileMenu.classList.remove('opacity-100');
                mobileMenu.classList.add('opacity-0');
                mobileMenuPanel.classList.add('translate-x-full');
            });
        });
        
        const scrollToTopButton = document.getElementById('scroll-to-top');
        window.addEventListener('scroll', () => {
            if (window.pageYOffset > 300) scrollToTopButton.classList.remove('hidden');
            else scrollToTopButton.classList.add('hidden');
        });
        scrollToTopButton.addEventListener('click', () => window.scrollTo({ top: 0, behavior: 'smooth' }));
        document.getElementById('current-year').textContent = new Date().getFullYear();

        // --- Tool Tabs ---
        const tabDomain = document.getElementById('tab-domain');
        const tabCopy = document.getElementById('tab-copy');
        const toolSections = document.querySelectorAll('.tool-section');
        tabDomain.addEventListener('click', () => {
            toolSections.forEach(s => s.classList.add('hidden'));
            document.getElementById('domain-tool').classList.remove('hidden');
            tabDomain.classList.add('bg-primary','text-white');
            tabCopy.classList.remove('bg-primary','text-white');
            tabCopy.classList.add('text-gray-300');
        });
        tabCopy.addEventListener('click', () => {
            if (!userData.sessionToken || userData.subscription !== 'pro') {
                showSubscriptionModal();
                return;
            }
            toolSections.forEach(s => s.classList.add('hidden'));
            document.getElementById('copy-tool').classList.remove('hidden');
            tabCopy.classList.add('bg-primary','text-white');
            tabDomain.classList.remove('bg-primary','text-white');
            tabDomain.classList.add('text-gray-300');
        });

        // --- User Data & Auth ---
        let userData = {
            email: null,
            subscription: 'free',
            domainChecksUsed: 0,
            domainChecksLimit: 1,
            copyChecksUsed: 0,
            copyChecksLimit: 0,
            licenseKey: null,
            sessionToken: null
        };

        const userEmailSpan = document.getElementById('user-email');
        const usageBadge = document.getElementById('usage-badge');
        const userMenuBtn = document.getElementById('user-menu-btn');
        const userDropdown = document.getElementById('user-dropdown');
        const loginHeaderBtn = document.getElementById('login-header-btn');
        const mobileLoginBtn = document.getElementById('mobile-login-btn');
        const loginModal = document.getElementById('login-modal');
        const closeLoginModal = document.getElementById('close-login-modal');
        const loginEmail = document.getElementById('login-email');
        const loginPassword = document.getElementById('login-password');
        const loginError = document.getElementById('login-error');
        const loginSubmit = document.getElementById('login-submit');
        const dropdownTier = document.getElementById('dropdown-tier');
        const dropdownLogout = document.getElementById('dropdown-logout');

        function showLoginModal() { loginModal.classList.remove('hidden'); loginModal.classList.add('flex'); }
        function hideLoginModal() { loginModal.classList.add('hidden'); loginModal.classList.remove('flex'); loginError.classList.add('hidden'); }
        closeLoginModal.addEventListener('click', hideLoginModal);
        loginHeaderBtn.addEventListener('click', showLoginModal);
        mobileLoginBtn.addEventListener('click', showLoginModal);

        loginSubmit.addEventListener('click', async () => {
            const email = loginEmail.value.trim();
            const password = loginPassword.value.trim();
            if (!email || !password) {
                loginError.textContent = 'Email and password required';
                loginError.classList.remove('hidden');
                return;
            }
            loginError.classList.add('hidden');
            try {
                const res = await fetch('/api/auth/login', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ email, password })
                });
                const data = await res.json();
                if (res.ok && data.session) {
                    userData.sessionToken = data.session.access_token;
                    userData.email = data.user.email;
                    userData.subscription = data.user.subscription_tier || 'free';
                    await fetchUsage();
                    updateUIAfterLogin();
                    hideLoginModal();
                } else {
                    loginError.textContent = data.error || 'Login failed';
                    loginError.classList.remove('hidden');
                }
            } catch (e) {
                loginError.textContent = 'Network error';
                loginError.classList.remove('hidden');
            }
        });

        async function fetchUsage() {
            if (!userData.sessionToken) return;
            try {
                const res = await fetch('/api/usage/get', {
                    headers: { 'Authorization': `Bearer ${userData.sessionToken}` }
                });
                const data = await res.json();
                if (res.ok) {
                    userData.domainChecksUsed = data.domain_checks_month;
                    userData.copyChecksUsed = data.copy_checks_month;
                    userData.domainChecksLimit = data.subscription_tier === 'pro' ? 9999 : 1;
                    userData.copyChecksLimit = data.subscription_tier === 'pro' ? 9999 : 0;
                    userData.subscription = data.subscription_tier;
                }
            } catch (e) { console.error('Failed to fetch usage', e); }
        }

        function updateUIAfterLogin() {
            userEmailSpan.textContent = userData.email;
            userEmailSpan.classList.remove('hidden');
            userMenuBtn.classList.remove('hidden');
            loginHeaderBtn.classList.add('hidden');
            mobileLoginBtn.classList.add('hidden');
            if (userData.subscription === 'pro') {
                usageBadge.textContent = `Unlimited`;
            } else {
                usageBadge.textContent = `${userData.domainChecksUsed}/${userData.domainChecksLimit} domain checks`;
            }
            usageBadge.classList.remove('hidden');
            dropdownTier.textContent = userData.subscription === 'pro' ? 'Pro Plan' : 'Free Plan';
        }

        userMenuBtn.addEventListener('click', () => {
            userDropdown.classList.toggle('hidden');
        });
        dropdownLogout.addEventListener('click', () => {
            userData = { ...userData, sessionToken: null, email: null, subscription: 'free' };
            userEmailSpan.classList.add('hidden');
            usageBadge.classList.add('hidden');
            userMenuBtn.classList.add('hidden');
            loginHeaderBtn.classList.remove('hidden');
            mobileLoginBtn.classList.remove('hidden');
            userDropdown.classList.add('hidden');
            localStorage.removeItem('inboxlx_session');
        });

        async function loadSession() {
            const stored = localStorage.getItem('inboxlx_session');
            if (stored) {
                const { token, email } = JSON.parse(stored);
                userData.sessionToken = token;
                userData.email = email;
                try {
                    const res = await fetch('/api/auth/validate', { headers: { 'Authorization': `Bearer ${token}` } });
                    if (res.ok) {
                        const data = await res.json();
                        userData.subscription = data.subscription_tier;
                        await fetchUsage();
                        updateUIAfterLogin();
                    } else {
                        localStorage.removeItem('inboxlx_session');
                    }
                } catch { localStorage.removeItem('inboxlx_session'); }
            }
        }
        loadSession();

        // --- Subscription / License Modals ---
        const subModal = document.getElementById('subscription-modal');
        const licenseModal = document.getElementById('license-modal');
        const closeModal = document.getElementById('close-modal');
        const closeLicense = document.getElementById('close-license-modal');
        const enterLicense = document.getElementById('enter-license-btn');
        const backToSub = document.getElementById('back-to-subscription');
        const verifyLicense = document.getElementById('verify-license-btn');
        const licenseInput = document.getElementById('license-key-input');
        const upgradeBtn = document.getElementById('upgrade-btn');
        const copyUpgradeBtn = document.getElementById('copy-upgrade-btn');
        const loginBtn = document.getElementById('login-btn');

        function showSubscriptionModal() { subModal.classList.remove('hidden'); subModal.classList.add('flex'); }
        function hideSubscriptionModal() { subModal.classList.add('hidden'); subModal.classList.remove('flex'); }
        function showLicenseModal() { licenseModal.classList.remove('hidden'); licenseModal.classList.add('flex'); hideSubscriptionModal(); }
        function hideLicenseModal() { licenseModal.classList.add('hidden'); licenseModal.classList.remove('flex'); }

        closeModal.addEventListener('click', hideSubscriptionModal);
        closeLicense.addEventListener('click', hideLicenseModal);
        enterLicense.addEventListener('click', showLicenseModal);
        backToSub.addEventListener('click', () => { hideLicenseModal(); showSubscriptionModal(); });
        if (loginBtn) loginBtn.addEventListener('click', showSubscriptionModal);
        if (upgradeBtn) upgradeBtn.addEventListener('click', showSubscriptionModal);
        if (copyUpgradeBtn) copyUpgradeBtn.addEventListener('click', showSubscriptionModal);

        verifyLicense.addEventListener('click', async () => {
            const key = licenseInput.value.trim();
            if (!key) return alert('Enter license key');
            const res = await fetch('/api/verify-subscription', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ licenseKey: key })
            });
            const data = await res.json();
            if (data.valid) {
                userData.subscription = 'pro';
                userData.licenseKey = key;
                if (userData.sessionToken) {
                    await fetch('/api/usage/update-subscription', {
                        method: 'POST',
                        headers: { 
                            'Authorization': `Bearer ${userData.sessionToken}`,
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify({ tier: 'pro', licenseKey: key })
                    });
                }
                hideLicenseModal();
                alert('Pro activated!');
                updateUIAfterLogin();
            } else {
                alert('Invalid license key');
            }
        });

        // --- Domain Check ---
        const domainInput = document.getElementById('domain-input');
        const checkDomainBtn = document.getElementById('check-domain-button');
        const domainLoading = document.getElementById('domain-loading-state');
        const domainResults = document.getElementById('domain-results-section');
        const domainVerdictBadge = document.getElementById('domain-verdict-badge');
        const domainDisplay = document.getElementById('domain-display');
        const domainLastUpdated = document.getElementById('domain-last-updated');
        const domainRecommendationsList = document.querySelector('.domain-recommendations-list');

        checkDomainBtn.addEventListener('click', async () => {
            const domain = domainInput.value.trim().toLowerCase();
            if (!domain) return alert('Enter domain');
            if (!/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(domain)) 
                return alert('Invalid domain');

            if (!userData.sessionToken) {
                showLoginModal();
                return;
            }

            if (userData.subscription !== 'pro' && userData.domainChecksUsed >= userData.domainChecksLimit) {
                alert('You have used your free domain check for this month. Upgrade to Pro for unlimited checks.');
                showSubscriptionModal();
                return;
            }

            domainLoading.classList.remove('hidden');
            domainResults.classList.add('hidden');

            try {
                const res = await fetch('/api/check-domain', {
                    method: 'POST',
                    headers: { 
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${userData.sessionToken}`
                    },
                    body: JSON.stringify({ domain })
                });
                const data = await res.json();
                if (res.ok) {
                    userData.domainChecksUsed++;
                    usageBadge.textContent = userData.subscription === 'pro' ? 'Unlimited' : `${userData.domainChecksUsed}/${userData.domainChecksLimit} domain checks`;
                    displayDomainResults(domain, data);
                } else {
                    alert(data.error || 'Check failed');
                }
            } catch (e) {
                alert('Network error');
            } finally {
                domainLoading.classList.add('hidden');
                domainResults.classList.remove('hidden');
            }
        });

        function displayDomainResults(domain, data) {
            domainDisplay.textContent = domain;
            const now = new Date();
            domainLastUpdated.textContent = `Last checked: ${now.toLocaleTimeString()}`;
            let badgeText, badgeClass;
            if (data.verdict === 'ready') {
                badgeText = '🟢 READY';
                badgeClass = 'status-ready';
            } else if (data.verdict === 'risky') {
                badgeText = '🟡 RISKY';
                badgeClass = 'status-risky';
            } else {
                badgeText = '🔴 NOT READY';
                badgeClass = 'status-not-ready';
            }
            domainVerdictBadge.textContent = badgeText;
            domainVerdictBadge.className = `px-4 py-2 rounded-full text-white font-semibold ${badgeClass}`;

            updateDomainCheckElement('mx', data.mx);
            updateDomainCheckElement('spf', data.spf);
            updateDomainCheckElement('dkim', data.dkim);
            updateDomainCheckElement('dmarc', data.dmarc);
            updateDomainCheckElement('age', data.whois);

            domainRecommendationsList.innerHTML = '';
            if (data.recommendations && data.recommendations.length) {
                data.recommendations.forEach(rec => {
                    const item = document.createElement('div');
                    item.className = 'flex items-start mb-2';
                    item.innerHTML = `<i class="fas fa-check-circle text-blue-400 mt-0.5 mr-3"></i><span>${rec}</span>`;
                    domainRecommendationsList.appendChild(item);
                });
            }
        }

        function updateDomainCheckElement(type, data) {
            const checkElement = document.getElementById(`${type}-check`);
            const iconElement = checkElement.querySelector('.check-icon');
            const detailsElement = checkElement.querySelector('.check-details');
            let iconClass, icon, detailsHTML;

            switch(type) {
                case 'mx':
                    if (data.exists) {
                        iconClass = 'check-pass';
                        icon = '<i class="fas fa-check-circle text-2xl"></i>';
                        detailsHTML = `<p class="font-medium text-white">✓ MX Found: ${data.provider || 'Custom'}</p><p class="text-gray-400">Priority: ${data.records?.[0]?.priority || 'N/A'}</p>`;
                    } else {
                        iconClass = 'check-fail';
                        icon = '<i class="fas fa-times-circle text-2xl"></i>';
                        detailsHTML = `<p class="font-medium text-white">✗ No MX records found</p><p class="text-gray-400">Domain cannot receive email</p>`;
                    }
                    break;
                case 'spf':
                    if (data.exists && data.valid) {
                        if (data.multiple) {
                            iconClass = 'check-warning';
                            icon = '<i class="fas fa-exclamation-triangle text-2xl"></i>';
                            detailsHTML = `<p class="font-medium text-white">⚠ Multiple SPF records detected</p><p class="text-gray-400">Common mistake</p>`;
                        } else {
                            iconClass = 'check-pass';
                            icon = '<i class="fas fa-check-circle text-2xl"></i>';
                            detailsHTML = `<p class="font-medium text-white">✓ SPF record valid</p><p class="text-gray-400">Record found</p>`;
                        }
                    } else if (data.exists && !data.valid) {
                        iconClass = 'check-warning';
                        icon = '<i class="fas fa-exclamation-triangle text-2xl"></i>';
                        detailsHTML = `<p class="font-medium text-white">⚠ SPF found but syntax may be invalid</p><p class="text-gray-400">Check configuration</p>`;
                    } else {
                        iconClass = 'check-fail';
                        icon = '<i class="fas fa-times-circle text-2xl"></i>';
                        detailsHTML = `<p class="font-medium text-white">✗ No SPF record found</p><p class="text-gray-400">Required for deliverability</p>`;
                    }
                    break;
                case 'dkim':
                    if (data.exists) {
                        iconClass = data.keyLength >= 2048 ? 'check-pass' : 'check-warning';
                        icon = data.keyLength >= 2048 ? '<i class="fas fa-check-circle text-2xl"></i>' : '<i class="fas fa-exclamation-triangle text-2xl"></i>';
                        detailsHTML = `<p class="font-medium text-white">${data.keyLength >= 2048 ? '✓' : '⚠'} DKIM present</p><p class="text-gray-400">Key strength: ${data.keyLength >= 2048 ? 'Strong (2048-bit)' : 'Weak (1024-bit)'}</p>`;
                    } else {
                        iconClass = 'check-fail';
                        icon = '<i class="fas fa-times-circle text-2xl"></i>';
                        detailsHTML = `<p class="font-medium text-white">✗ No DKIM record found</p><p class="text-gray-400">Emails may be flagged as suspicious</p>`;
                    }
                    break;
                case 'dmarc':
                    if (data.exists) {
                        const policyText = data.policy === 'reject' ? 'Reject' : (data.policy === 'quarantine' ? 'Quarantine' : 'None');
                        iconClass = data.policy === 'reject' ? 'check-pass' : 'check-warning';
                        icon = data.policy === 'reject' ? '<i class="fas fa-check-circle text-2xl"></i>' : '<i class="fas fa-exclamation-triangle text-2xl"></i>';
                        detailsHTML = `<p class="font-medium text-white">${data.policy === 'reject' ? '✓' : '⚠'} DMARC configured</p><p class="text-gray-400">Policy: ${policyText}</p>`;
                    } else {
                        iconClass = 'check-warning';
                        icon = '<i class="fas fa-exclamation-triangle text-2xl"></i>';
                        detailsHTML = `<p class="font-medium text-white">⚠ DMARC missing</p><p class="text-gray-400">Recommended for cold email trust</p>`;
                    }
                    break;
                case 'age':
                    if (data.ageInDays) {
                        let ageStatus, ageIconClass;
                        if (data.ageInDays >= 30) { ageStatus = 'Established'; ageIconClass = 'check-pass'; icon = '<i class="fas fa-check-circle text-2xl"></i>'; }
                        else if (data.ageInDays >= 7) { ageStatus = 'Young'; ageIconClass = 'check-warning'; icon = '<i class="fas fa-exclamation-triangle text-2xl"></i>'; }
                        else { ageStatus = 'Very New'; ageIconClass = 'check-warning'; icon = '<i class="fas fa-exclamation-triangle text-2xl"></i>'; }
                        iconClass = ageIconClass;
                        detailsHTML = `<div class="flex justify-between items-center"><div><p class="font-medium text-white">${ageStatus} domain</p><p class="text-gray-400">Created: ${data.creationDate ? new Date(data.creationDate).toLocaleDateString() : 'N/A'}</p></div><div class="text-right"><p class="font-bold text-lg text-white">${data.ageInDays} days</p><p class="text-gray-400 text-sm">Age</p></div></div>`;
                    } else {
                        iconClass = 'check-warning';
                        icon = '<i class="fas fa-exclamation-triangle text-2xl"></i>';
                        detailsHTML = `<p class="font-medium text-white">Unable to determine domain age</p><p class="text-gray-400">WHOIS lookup failed</p>`;
                    }
                    break;
            }
            iconElement.className = `check-icon ${iconClass}`;
            iconElement.innerHTML = icon;
            detailsElement.innerHTML = detailsHTML;
        }

        // --- Copy Compliance ---
        const copySubject = document.getElementById('email-subject');
        const copyBody = document.getElementById('email-body');
        const checkCopyBtn = document.getElementById('check-copy-button');
        const copyLoading = document.getElementById('copy-loading-state');
        const copyResults = document.getElementById('copy-results-section');
        const copyVerdictBadge = document.getElementById('copy-verdict-badge');
        const copyLastUpdated = document.getElementById('copy-last-updated');
        const emailPreview = document.getElementById('email-preview');
        const spamSpecific = document.getElementById('spam-specific');
        const overclaimSpecific = document.getElementById('overclaim-specific');
        const personalizationSpecific = document.getElementById('personalization-specific');
        const unsubscribeSpecific = document.getElementById('unsubscribe-specific');
        const toneSpecific = document.getElementById('tone-specific');
        const copyRecommendationsList = document.querySelector('.copy-recommendations-list');

        // Expanded spam trigger lists
        const spamTriggersList = [
            'free', 'guarantee', 'winner', 'won', 'prize', 'discount', 'save up to', 'act now', 'limited time', 'offer expires',
            'click here', 'buy now', 'order now', 'special promotion', 'dear friend', 'urgent', 'important information',
            'risk-free', '100% free', 'no cost', 'no fees', 'once in a lifetime', 'you have been selected', 'money', 'cash', 'income',
            'earn', 'make money', 'extra income', 'home based', 'get paid', 'opportunity', 'system', 'sample', 'gift',
            'check or money order', 'credit card', 'apply now', 'call now', 'contact us immediately', 'don\'t delete',
            'fantastic deal', 'for free', 'great offer', 'information you requested', 'no catch', 'no strings attached',
            'exclusive deal', 'instant access', 'promise', 'lifetime', 'bonus', 'congratulations', 'selected', 'winner',
            'vacation', 'prize', 'inheritance', 'lottery', 'casino', 'urgent response', 'verify account', 'update payment',
            'suspended', 'limited offer', 'expire today', 'last chance', 'do not miss', 'act fast', 'hurry', 'now only',
            'best price', 'lowest price', 'compare rates', 'refinance', 'debt', 'credit', 'loan', 'mortgage', 'insurance',
            'pharmacy', 'prescription', 'meds', 'weight loss', 'viagra', 'cialis', 'work from home', 'online degree',
            'diploma', 'university', 'job', 'employment', 'income opportunity', 'passive income', 'residual income',
            'financial freedom', 'wealth', 'retire', 'retirement', 'business opportunity', 'mlm', 'network marketing',
            'multi-level', 'pyramid', 'gifting', 'chain letter', 'bulk email', 'mass email', 'spam', 'list removal',
            'remove', 'opt-out', 'unsubscribe', 'click to remove', 'not spam', 'this is not spam'
        ];

        const overclaimPatternsList = [
            'increase.*by.*%', 'grow.*by.*%', 'boost.*by.*%', '300%', '500%', '1000%', 'double', 'triple', 'quadruple',
            'revolutionary', 'groundbreaking', 'breakthrough', 'miracle', 'magic', 'secret', 'hidden', 'overnight',
            'instant', 'immediately', 'guaranteed results', 'proven method', 'scientifically proven', 'exclusive',
            'limited', 'never before seen', 'million', 'billion', 'fortune', 'wealth', 'life-changing', 'transform your',
            'change your life', 'skyrocket', 'explode', 'massive', 'unbelievable', 'incredible', 'amazing', 'phenomenal',
            'best ever', 'most effective', 'highest quality', 'number one', 'top rated', 'award winning', 'patented',
            'secret formula', 'undisclosed', 'confidential', 'proprietary', 'exclusive access', 'insider', 'private',
            'members only', 'vip', 'priority', 'first time ever', 'never offered before', 'limited availability',
            'while supplies last', 'act now', 'don\'t wait', 'immediate action', 'fast results', 'quick money',
            'easy money', 'effortless', 'no work', 'get rich', 'make millions', 'become a millionaire', 'financial freedom'
        ];

        const deceptivePersonalizationList = [
            '{first name}', '{first_name}', '{firstname}', '{last name}', '{last_name}', '{lastname}',
            '{company}', '{company name}', '{city}', '{industry}', 'dear friend', 'dear valued customer',
            'dear [name]', 'dear [firstname]', 'hello [name]', 'hi [name]', 'hey [name]', 'to [name]',
            '{email}', '{phone}', '{address}', '{zip}', '{country}', '{state}', '{region}'
        ];

        function analyzeEmailCopy(subject, body) {
            const fullText = (subject + ' ' + body).toLowerCase();

            const foundSpam = spamTriggersList.filter(t => fullText.includes(t.toLowerCase()));
            const foundOverclaim = [];
            overclaimPatternsList.forEach(p => {
                const regex = new RegExp(p, 'gi');
                const m = fullText.match(regex);
                if (m) foundOverclaim.push(...m);
            });
            const foundDeceptive = deceptivePersonalizationList.filter(p => body.toLowerCase().includes(p));
            const hasUnsubscribe = /unsubscribe|opt-?out|remove me|email preferences/i.test(fullText);

            spamSpecific.innerHTML = foundSpam.length ? '❌ Found: ' + foundSpam.join(', ') : '✅ None';
            overclaimSpecific.innerHTML = foundOverclaim.length ? '❌ Found: ' + [...new Set(foundOverclaim)].join(', ') : '✅ None';
            personalizationSpecific.innerHTML = foundDeceptive.length ? '❌ Found: ' + foundDeceptive.join(', ') : '✅ None';
            unsubscribeSpecific.innerHTML = hasUnsubscribe ? '✅ Present' : '❌ Missing';

            const words = body.split(/\s+/).length;
            const sentences = body.split(/[.!?]+/).filter(s => s.trim().length > 0).length;
            const avg = sentences ? (words / sentences).toFixed(1) : 0;
            toneSpecific.innerHTML = `Words: ${words}, Sentences: ${sentences}, Avg length: ${avg}`;

            const spamScore = Math.min(100, foundSpam.length * 8 + foundOverclaim.length * 10);
            const overclaimScore = Math.min(100, foundOverclaim.length * 15);
            const personalizationScore = foundDeceptive.length ? 70 : 0;
            const unsubscribeScore = hasUnsubscribe ? 0 : 60;
            const toneScore = Math.max(0, 100 - (avg > 25 ? avg : 0) * 1.5) + (words > 300 ? -20 : 0);
            const complianceScore = Math.max(0, 100 - (spamScore*0.35 + overclaimScore*0.25 + personalizationScore*0.2 + unsubscribeScore*0.1));

            const verdict = complianceScore >= 70 ? 'compliant' : complianceScore >= 40 ? 'needs-review' : 'non-compliant';
            const badgeMap = { compliant: '🟢 COMPLIANT', 'needs-review': '🟡 NEEDS REVIEW', 'non-compliant': '🔴 NON-COMPLIANT' };
            const classMap = { compliant: 'status-compliant', 'needs-review': 'status-needs-review', 'non-compliant': 'status-non-compliant' };
            copyVerdictBadge.textContent = badgeMap[verdict];
            copyVerdictBadge.className = `px-4 py-2 rounded-full text-white font-semibold ${classMap[verdict]}`;

            let recs = [];
            if (foundSpam.length) recs.push(`Remove spam trigger words: ${foundSpam.join(', ')}`);
            if (foundOverclaim.length) recs.push(`Replace exaggerated claims: ${[...new Set(foundOverclaim)].join(', ')}`);
            if (foundDeceptive.length) recs.push(`Use real personalization instead of placeholders like ${foundDeceptive.join(', ')}`);
            if (!hasUnsubscribe) recs.push('Add an unsubscribe link (CAN-SPAM requirement)');
            if (avg > 25) recs.push(`Sentences are too long (avg ${avg} words). Break them up.`);
            if (words > 250) recs.push('Email is too long (best under 150 words)');
            if (verdict === 'compliant') recs.push('Your copy looks good! Consider A/B testing.');
            copyRecommendationsList.innerHTML = recs.map(r => `<div class="flex items-start mb-2"><i class="fas fa-lightbulb text-purple-400 mt-0.5 mr-3"></i><span>${r}</span></div>`).join('');

            let previewHTML = '';
            const lines = (subject + '\n\n' + body).split('\n');
            lines.forEach(line => {
                if (!line.trim()) { previewHTML += '<div style="height:1em;"></div>'; return; }
                let cls = '';
                if (foundSpam.some(s => line.toLowerCase().includes(s))) cls = 'highlight-spam';
                else if (foundDeceptive.some(d => line.toLowerCase().includes(d))) cls = 'highlight-warning';
                else if (line.toLowerCase().includes('unsubscribe')) cls = 'highlight-good';
                previewHTML += `<div class="${cls}">${line.replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;')}</div>`;
            });
            emailPreview.innerHTML = previewHTML;

            copyLastUpdated.textContent = `Last analyzed: ${new Date().toLocaleTimeString()}`;
        }

        checkCopyBtn.addEventListener('click', () => {
            if (!userData.sessionToken || userData.subscription !== 'pro') {
                showSubscriptionModal();
                return;
            }
            const subject = copySubject.value.trim();
            const body = copyBody.value.trim();
            if (!subject && !body) return alert('Enter subject or body');
            copyLoading.classList.remove('hidden');
            copyResults.classList.add('hidden');
            setTimeout(() => {
                analyzeEmailCopy(subject, body);
                copyLoading.classList.add('hidden');
                copyResults.classList.remove('hidden');
            }, 800);
        });

        document.getElementById('load-example-button').addEventListener('click', () => {
            copySubject.value = "Quick question about your business...";
            copyBody.value = `Hi {First Name},\n\nI was looking at your website and noticed you're doing great work in the industry.\n\nI wanted to reach out because we've helped similar companies INCREASE THEIR REVENUE BY 300% in just 90 days using our revolutionary AI-powered solution.\n\nThis is a LIMITED TIME OFFER - act now to get our exclusive FREE TRIAL with no credit card required!\n\nWe guarantee results or your money back 100%.\n\nClick here to schedule a call: https://ourcompany.com/schedule\n\nBest regards,\nJohn Smith\nCEO, Awesome Solutions Inc.\n\nP.S. This won't take much of your time and could be worth MILLIONS to your business!`;
        });

        document.getElementById('clear-copy-button').addEventListener('click', () => {
            copySubject.value = '';
            copyBody.value = '';
            copyResults.classList.add('hidden');
        });

        // --- AI Rewrite ---
        const aiRewriteBtn = document.getElementById('ai-rewrite-button');
        const aiModal = document.getElementById('ai-rewrite-modal');
        const closeAiModal = document.getElementById('close-ai-modal');
        const cancelAiBtn = document.getElementById('cancel-rewrite-btn');
        const aiToneSelect = document.getElementById('ai-tone');
        const aiRewrittenText = document.getElementById('ai-rewritten-text');
        const applyRewriteBtn = document.getElementById('apply-rewrite-btn');
        const regenerateRewriteBtn = document.getElementById('regenerate-rewrite-btn');

        function showAiModal() { aiModal.classList.remove('hidden'); aiModal.classList.add('flex'); }
        function hideAiModal() { aiModal.classList.add('hidden'); aiModal.classList.remove('flex'); }
        closeAiModal.addEventListener('click', hideAiModal);
        cancelAiBtn.addEventListener('click', hideAiModal);

        aiRewriteBtn.addEventListener('click', async () => {
            if (!userData.sessionToken || userData.subscription !== 'pro') {
                showSubscriptionModal();
                return;
            }
            const subject = copySubject.value.trim();
            const body = copyBody.value.trim();
            if (!body && !subject) return alert('Paste some copy first');
            showAiModal();
            aiRewrittenText.value = `Subject: ${subject}\n\n${body}`;
        });

        regenerateRewriteBtn.addEventListener('click', async () => {
            const subject = copySubject.value.trim();
            const body = copyBody.value.trim();
            const tone = aiToneSelect.value;
            aiRewrittenText.value = 'Generating...';
            try {
                const res = await fetch('/api/rewrite-copy', {
                    method: 'POST',
                    headers: { 
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${userData.sessionToken}`
                    },
                    body: JSON.stringify({ text: `Subject: ${subject}\n\n${body}`, tone })
                });
                const data = await res.json();
                if (res.ok) aiRewrittenText.value = data.rewritten;
                else aiRewrittenText.value = 'Error: ' + data.error;
            } catch {
                aiRewrittenText.value = 'Network error';
            }
        });

        applyRewriteBtn.addEventListener('click', () => {
            const rewritten = aiRewrittenText.value;
            const lines = rewritten.split('\n');
            if (lines[0].toLowerCase().startsWith('subject:')) {
                copySubject.value = lines[0].substring(8).trim();
                copyBody.value = lines.slice(2).join('\n').trim();
            } else {
                copyBody.value = rewritten;
            }
            hideAiModal();
        });

        // --- Placeholder for missing functions (if any) ---
        console.log('InboxLX ready – full version');
    </script>

    <!-- JSON-LD Schema -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "WebApplication",
        "name": "InboxLX",
        "description": "Check domain technical readiness AND email copy compliance for cold email campaigns.",
        "url": "https://inboxlx.vercel.app",
        "applicationCategory": "BusinessApplication",
        "operatingSystem": "Any",
        "offers": {
            "@type": "Offer",
            "price": "14.99",
            "priceCurrency": "USD"
        },
        "featureList": [
            "Domain MX, SPF, DKIM, DMARC checks",
            "Domain age analysis",
            "Email spam trigger detection",
            "Overclaim language analysis",
            "Personalization pattern checking",
            "Unsubscribe compliance verification",
            "Tone and readability scoring"
        ],
        "author": { "@type": "Organization", "name": "InboxLX" }
    }
    </script>
</body>
</html>